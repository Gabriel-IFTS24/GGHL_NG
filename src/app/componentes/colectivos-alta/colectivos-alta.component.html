<h4>Alta de Colectivos</h4>

<form [formGroup]="colectivoForm" (ngSubmit)="agregarColectivo()">
  <div class="form-row">
    <div class="form-group mb-3">
      <label for="patente">Patente:</label>
      <input type="text" class="form-control" id="patente" name="patente" formControlName="patente" placeholder="Ej: ABC 123">
      @if(colectivoForm.get('patente')?.errors?.['required'] && colectivoForm.get('patente')?.touched){
        <div class="text-danger">Debe ingresar la patente.</div>}
    </div>

    <div class="form-group mb-3">
      <label for="modelo">Modelo:</label>
      <input type="text" class="form-control" id="modelo" name="modelo" formControlName="modelo" placeholder="Ej: Mercedes Benz Citaro">
      @if(colectivoForm.get('modelo')?.errors?.['required'] && colectivoForm.get('modelo')?.touched){
        <div class="text-danger">Debe ingresar el modelo.</div>}
    </div>
    
    <div class="form-group mb-3">
      <label for="conductor">Conductor:</label>
      <select class="form-select" id="conductor" name="conductor" formControlName="conductor">
        <option value="" disabled selected>Seleccione un conductor</option>
        @for (conductor of conductores; track conductor.id){
          <option [value]="conductor.apellido + ' ' + conductor.nombre">
            {{ conductor.apellido }}, {{ conductor.nombre }}
          </option>}
        </select>
        @if(colectivoForm.get('conductor')?.errors?.['required'] && colectivoForm.get('conductor')?.touched){
          <div class="text-danger">Debe seleccionar un conductor.</div>}
      </div>
      
      <div class="form-group mb-3">
        <label for="anioFabricacion">Año de Fabricación:</label>
        <input type="number" class="form-control" id="anioFabricacion" name="anioFabricacion" formControlName="anioFabricacion" placeholder="Ej: 2020">
        @if(colectivoForm.get('anioFabricacion')?.errors?.['required'] && colectivoForm.get('anioFabricacion')?.touched){
          <div class="text-danger">Debe ingresar el año de fabricación.</div>}
        @if((colectivoForm.get('anioFabricacion')?.errors?.['max'] || colectivoForm.get('anioFabricacion')?.errors?.['min']) && colectivoForm.get('anioFabricacion')?.touched){
            <div class="text-danger">El año debe ser un valor válido (ej: 1950-{{ currentYear }}).</div>}
      </div>
      
      <div class="form-group mb-3">
        <label for="capacidadPasajeros">Capacidad de Pasajeros:</label>
        <input type="number" class="form-control" id="capacidadPasajeros" name="capacidadPasajeros" formControlName="capacidadPasajeros" placeholder="Ej: 50">
        @if(colectivoForm.get('capacidadPasajeros')?.errors?.['required'] && colectivoForm.get('capacidadPasajeros')?.touched){
          <div class="text-danger">Debe ingresar la cantidad de pasajeros.</div>}
        @if(colectivoForm.get('capacidadPasajeros')?.errors?.['min'] && colectivoForm.get('capacidadPasajeros')?.touched){
            <div class="text-danger">La capacidad mínima es de 1 pasajero.</div>}
      </div>
      
      <button class="btn btn-success" type="submit" [disabled]="!colectivoForm.valid">Guardar Colectivo</button>
    </div>
    </form>